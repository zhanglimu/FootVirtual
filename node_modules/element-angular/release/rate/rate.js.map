{"version":3,"sources":["../../src/rate/rate.ts"],"names":[],"mappings":"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","file":"rate.js","sourceRoot":"","sourcesContent":["import { Component, ElementRef, OnInit, ViewChild, Renderer2, forwardRef } from '@angular/core';\nimport { ElRateProps } from './rate.props';\nimport { SafeStyle, DomSanitizer } from '@angular/platform-browser';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nexport type RateMapItem = { color: string, class: string }\nexport type RateMap = {\n  low: RateMapItem,\n  high: RateMapItem,\n  medium: RateMapItem,\n  void: RateMapItem,\n  elDisabled: RateMapItem,\n}\nexport class ElRate extends ElRateProps implements OnInit, ControlValueAccessor {\n  \n   rateIcon: ElementRef\n  scores: boolean[] = []\n  rateMap: RateMap\n  backupModel: number\n/**\n * @param {?} sanitizer\n * @param {?} renderer\n */\nconstructor(\nprivate sanitizer: DomSanitizer,\nprivate renderer: Renderer2\n  ) {\n    super()\n  }\n/**\n * @param {?} __0\n * @param {?=} index\n * @param {?=} reset\n * @return {?}\n */\nhoverToggle({ srcElement }: Event, index?: number, reset: boolean = false): void {\n    if (this.elDisabled) return\n    const /** @type {?} */ iconElement: Element = srcElement.tagName === 'I' ? srcElement : srcElement.children[0]\n    if (reset) {\n      this.model = this.backupModel\n      this.renderer.removeClass(iconElement, 'hover')\n    } else {\n      this.model = index\n      this.renderer.addClass(iconElement, 'hover')\n    }\n  }\n/**\n * @param {?} index\n * @return {?}\n */\nselectValue(index: number): void {\n    if (this.elDisabled) return\n    this.model = this.backupModel = index\n    this.modelChange.emit(index)\n    this.controlChange\n  }\n/**\n * @param {?} index\n * @return {?}\n */\nmakeIconClasses(index: number): string {\n    const /** @type {?} */ voidClass = this.elDisabled ? this.rateMap.elDisabled.class : this.rateMap.void.class\n    const /** @type {?} */ activeItem = this.findCurrentType(this.model, this.rateMap)\n    const /** @type {?} */ classes = index <= this.model ? activeItem.class : voidClass\n    return 'el-rate__icon ' + classes\n  }\n/**\n * @param {?} index\n * @return {?}\n */\nmakeIconStyles(index: number): SafeStyle {\n    const /** @type {?} */ voidColor = this.elDisabled ? this.rateMap.elDisabled.color : this.rateMap.void.color\n    const /** @type {?} */ activeItem = this.findCurrentType(this.model, this.rateMap)\n    const /** @type {?} */ styles = `color: ${index <= this.model ? activeItem.color : voidColor};`\n    return this.sanitizer.bypassSecurityTrustStyle(styles)\n  }\n/**\n * @param {?} index\n * @param {?} rateMap\n * @return {?}\n */\nfindCurrentType(index: number, rateMap: RateMap): RateMapItem {\n    if (index <= this.lowThreshold) return rateMap.low\n    if (index >= this.highThreshold) return rateMap.high\n    return rateMap.medium\n  }\n/**\n * @return {?}\n */\nngOnInit(): void {\n    this.scores = new Array(this.max).fill('')\n    this.backupModel = this.model\n    \n    this.rateMap = {\n      low: { color: this.colors[0], class: this.iconClasses[0] },\n      medium: { color: this.colors[1], class: this.iconClasses[1] },\n      high: { color: this.colors[2], class: this.iconClasses[2] },\n      void: { color: this.voidColor, class: this.voidIconClass },\n      elDisabled: { color: this.disabledVoidColor, class: this.disabledVoidIconClass },\n    }\n  }\n/**\n * @param {?} value\n * @return {?}\n */\nwriteValue(value: any): void {\n    this.model = value\n  }\n/**\n * @param {?} fn\n * @return {?}\n */\nregisterOnChange(fn: Function): void {\n    this.controlChange = fn\n  }\n/**\n * @param {?} fn\n * @return {?}\n */\nregisterOnTouched(fn: Function): void {\n    this.controlTouch = fn\n  }\nprivate controlChange: Function = () => {}\nprivate controlTouch: Function = () => {}\n  \nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: 'el-rate',\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => ElRate),\n    multi: true\n  }],\n  template: `\n    <div class=\"el-rate\" role=\"slider\">\n      <span *ngFor=\"let s of scores; let i = index\" class=\"el-rate__item\"\n        [ngStyle]=\"{cursor: elDisabled ? 'auto' : 'pointer'}\"\n        (mousemove)=\"hoverToggle($event, i)\"\n        (mouseleave)=\"hoverToggle($event, i, true)\"\n        (click)=\"selectValue(i)\">\n        <i class=\"el-rate__icon\" [style]=\"makeIconStyles(i)\"\n          [class]=\"makeIconClasses(i)\"\n          [class.hover]=\"i\"\n          #rateIcon></i>\n      </span>\n      <span *ngIf=\"showText\" class=\"el-rate__text\" [ngStyle]=\"{ color: textColor }\">\n        {{ texts[model] }}\n      </span>\n    </div>\n  `,\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: DomSanitizer, },\n{type: Renderer2, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'rateIcon': [{ type: ViewChild, args: ['rateIcon', ] },],\n};\n}\n\nfunction ElRate_tsickle_Closure_declarations() {\n/** @type {?} */\nElRate.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nElRate.ctorParameters;\n/** @type {?} */\nElRate.propDecorators;\n/** @type {?} */\nElRate.prototype.rateIcon;\n/** @type {?} */\nElRate.prototype.scores;\n/** @type {?} */\nElRate.prototype.rateMap;\n/** @type {?} */\nElRate.prototype.backupModel;\n/** @type {?} */\nElRate.prototype.controlChange;\n/** @type {?} */\nElRate.prototype.controlTouch;\n/** @type {?} */\nElRate.prototype.sanitizer;\n/** @type {?} */\nElRate.prototype.renderer;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}